(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{39:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},43:function(e,t,a){e.exports=a(74)},52:function(e,t,a){},53:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),i=a.n(c),o=a(8),s=(a(52),a(9)),l=a(17),u=a(2),m=a(3),d=a(5),p=a(4),f=a(6),h=a(39),b=a.n(h),g=(a(53),a(40)),v=a.n(g),y=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(s.b,{to:"/Configuration","data-testid":"btn-settings",className:"btn btn-secondary btn-block mb-3"},"CONFIGURAR"))}}]),t}(r.a.Component),E=a(29),O=function(){return E.get("https://opentdb.com/api_token.php?command=request").then((function(e){return e}))},k=a(29),N=function(e,t,a,n){return k.get("".concat("https://opentdb.com/api.php?amount=5&token=").concat(e,"&category=").concat(t,"&difficulty=").concat(a,"&type=").concat(n)).then((function(e){return e}))},C=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={name:"",email:"",avatar:""},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"changeName",value:function(e){this.setState({name:e.target.value})}},{key:"changeEmail",value:function(e){var t=v()(e.target.value);this.setState({email:e.target.value,avatar:t})}},{key:"isDisabled",value:function(){var e=this.state,t=e.name,a=e.email;return""===t||""===a}},{key:"clickToStartGame",value:function(){var e=this.props,t=e.storeToken,a=e.saveUserData,n=this.state,r=n.name,c=n.avatar,i=n.email;t(),a(r,c);var o={player:{name:r,assertions:0,score:0,gravatarEmail:i}};localStorage.setItem("state",JSON.stringify(o)),JSON.parse(localStorage.getItem("ranking"))||localStorage.setItem("ranking",JSON.stringify([]))}},{key:"renderNameInput",value:function(){var e=this,t=this.state.name;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Nome do Jogador"),r.a.createElement("input",{className:"form-control",type:"text","data-testid":"input-player-name",id:"name",onChange:function(t){return e.changeName(t)},value:t}))}},{key:"renderEmailInput",value:function(){var e=this,t=this.state.email;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"E-mail do Gravatar"),r.a.createElement("input",{type:"email",className:"form-control","data-testid":"input-gravatar-email",id:"email",onChange:function(t){return e.changeEmail(t)},value:t}))}},{key:"render",value:function(){var e=this,t=this.state.avatar;return r.a.createElement("form",{className:"mt-3"},r.a.createElement("img",{className:"rounded",src:"https://www.gravatar.com/avatar/".concat(t),alt:"avatar"}),this.renderNameInput(),this.renderEmailInput(),r.a.createElement(s.b,{to:"/gamepage"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block mb-3","data-testid":"btn-play",onClick:function(){return e.clickToStartGame()},disabled:this.isDisabled()},"JOGAR"),r.a.createElement(y,null)))}}]),t}(n.Component),j=Object(o.b)(null,(function(e){return{storeToken:function(){return e((function(e){O().then((function(t){return e({type:"GENERATE_TOKEN",payload:t})}))}))},saveUserData:function(t,a){return e(function(e,t){return{type:"SAVE_USER_DATA",name:e,avatar:t}}(t,a))}}}))(C),T=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),r.a.createElement(j,null)))}}]),t}(n.Component),R=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userData,a=e.score;return r.a.createElement("div",{className:"questions-header row bg-dark align-items-center"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"media"},t&&r.a.createElement("img",{className:"mr-3 rounded",src:"https://www.gravatar.com/avatar/".concat(t.avatar),"data-testid":"header-profile-picture",alt:"avatar"}),t&&r.a.createElement("div",{className:"media-body"},r.a.createElement("p",{"data-testid":"header-player-name",className:"h4 text-white"},"Jogador: ".concat(t.name)),r.a.createElement("p",{className:"text-white"},"Pontos:",r.a.createElement("span",{"data-testid":"header-score",className:"text-white ml-2"},a))))))}}]),t}(n.Component),w=Object(o.b)((function(e){return{userData:e.loginReducer[0],score:e.scoreReducer.points}}))(R);R.defaultProps={userData:[]};var S=a(7),I=a(15),A=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"freezeTheClock",value:function(){(0,this.props.pausecounter)(),clearInterval(this.timerID)}},{key:"tick",value:function(){(0,this.props.tok)()}},{key:"render",value:function(){var e=this.props,t=e.time,a=e.freezing;return 0===t&&this.freezeTheClock(),a&&clearInterval(this.timerID),r.a.createElement("div",null,r.a.createElement("p",{className:"lead p-2"},"Tempo: ".concat(t)))}}]),t}(r.a.Component),_=Object(o.b)((function(e){return{time:e.counterReducer.count,freezing:e.counterReducer.freeze}}),(function(e){return{tok:function(){return e({type:"TICK_TOCK"})},pausecounter:function(){return e({type:"CLOCK_FREEZED"})}}}))(A),D=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={index:0,questionClicked:!1,Arranswer:[],shuffle:!0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.restore)(),this.loadQuestions()}},{key:"rightChoice",value:function(){var e=this.props.countRightA;this.saveLocalStorage(),e(),this.setState({questionClicked:!0})}},{key:"wrongChoice",value:function(){this.setState({questionClicked:!0})}},{key:"callAnswers",value:function(){return this.state.Arranswer}},{key:"beforeTheCLick",value:function(){var e=this,t=-1;return this.shuffleAnswers(),this.callAnswers().map((function(a){return"correct"===a[1]?r.a.createElement("button",{type:"button",className:"btn btn-secondary m-1","data-testid":"correct-answer",onClick:function(){return e.rightChoice()}},a[0]):(t+=1,r.a.createElement("button",{className:"btn btn-secondary m-1",type:"button","data-testid":"wrong-answer".concat(t),onClick:function(){return e.wrongChoice()}},a))}))}},{key:"afterTheCLick",value:function(){(0,this.props.pausecounter)();var e=-1;return this.callAnswers().map((function(t){return"correct"===t[1]?r.a.createElement("button",{type:"button","data-testid":"correct-answer",className:"Correct btn btn-success m-1",disabled:!0},t[0]):(e+=1,r.a.createElement("button",{type:"button","data-testid":"wrong-answer".concat(e),className:"Wrong btn btn-danger m-1",disabled:!0},t))}))}},{key:"nextButton",value:function(){var e=this,t=this.state.index;return r.a.createElement("div",null,r.a.createElement("div",null,t<4&&r.a.createElement("button",{className:"btn btn-primary m-1",type:"button",onClick:function(){return e.clickToNext()},"data-testid":"btn-next"},"Pr\xf3xima"),4===t&&r.a.createElement(s.b,{to:"/feedback"},r.a.createElement("button",{className:"btn btn-primary m-1",type:"button",onClick:function(){return e.finishQuestions()},"data-testid":"btn-next"},"Pr\xf3xima"))))}},{key:"loadQuestions",value:function(){var e=this.props,t=e.tolkien;(0,e.getQuestions)(t,e.confCategory,e.confDifficulty,e.confType)}},{key:"clickToNext",value:function(){(0,this.props.restore)(),this.setState((function(e){return{index:e.index+1,questionClicked:!1,shuffle:!0}}))}},{key:"shuffleAnswers",value:function(){var e=this.props.questions,t=this.state,a=t.index,n=t.shuffle,r=[].concat(Object(I.a)(e[a].incorrect_answers),[[e[a].correct_answer,"correct"]]).sort((function(){return Math.random()-.5}));n&&this.setState({shuffle:!1,Arranswer:r})}},{key:"calculatePoints",value:function(){var e,t=this.props,a=t.sumPoints,n=t.time,r=t.questions[this.state.index].difficulty;"hard"===r&&(e=3),"medium"===r&&(e=2),"easy"===r&&(e=1);var c=10+n*e;return a(c),c}},{key:"saveLocalStorage",value:function(){var e=this.calculatePoints(),t=JSON.parse(localStorage.getItem("state"));t={player:Object(S.a)({},t.player,{assertions:t.player.assertions+1,score:t.player.score+e})},localStorage.setItem("state",JSON.stringify(t))}},{key:"finishQuestions",value:function(){var e=this.props,t=e.sendScoreToRanking,a=e.name,n=e.avatar,r=e.score;t(a,n,r);var c=JSON.parse(localStorage.getItem("ranking")),i=[].concat(Object(I.a)(c),[{name:a,score:r,picture:"https://www.gravatar.com/avatar/".concat(n)}]);localStorage.setItem("ranking",JSON.stringify(i))}},{key:"questionBuilder",value:function(){var e=this.props,t=e.questions,a=e.freezing,n=this.state,c=n.index,i=n.questionClicked;return r.a.createElement("div",{className:"card m-5"},r.a.createElement("div",{className:"card-header"},r.a.createElement("p",{className:"h5","data-testid":"question-category"},"Categoria: ".concat(t[c].category))),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{"data-testid":"question-text",className:"card-text"},t[c].question),i||a?this.afterTheCLick():this.beforeTheCLick(),i||a?this.nextButton():r.a.createElement(_,null)))}},{key:"render",value:function(){return this.props.questions.length>0?this.questionBuilder():r.a.createElement("p",{className:"display-4"},"Loading Questions...")}}]),t}(r.a.Component),x=Object(o.b)((function(e){return{tolkien:e.apiReducer.token,questions:e.apiReducer.questions,time:e.counterReducer.count,name:e.loginReducer[0].name,avatar:e.loginReducer[0].avatar,score:e.scoreReducer.points,freezing:e.counterReducer.freeze,confCategory:e.configReducer.confCategory,confDifficulty:e.configReducer.confDifficulty,confType:e.configReducer.confType}}),(function(e){return{getQuestions:function(t,a,n,r){return e(function(e,t,a,n){return function(r){N(e,t,a,n).then((function(e){return r({type:"STORE_QUESTIONS",payload:e})}))}}(t,a,n,r))},sumPoints:function(t){return e(function(e){return{type:"UPDATE_SCORE",points:e}}(t))},restore:function(){return e({type:"RESTORE_CLOCK"})},sendScoreToRanking:function(t,a,n){return e(function(e,t,a){return{type:"UPDATE_RANKING",name:e,avatar:t,score:a}}(t,a,n))},countRightA:function(){return e({type:"COUNT_RIGHT_ANSWEAR"})},pausecounter:function(){return e({type:"CLOCK_FREEZED"})}}}))(D),G=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement(x,null))}}]),t}(n.Component),L=[{tag:"General knowledge",id:9},{tag:"Entertainment: Books",id:10},{tag:"Entertainment: Filme",id:11},{tag:"Entertainment: Music",id:12},{tag:"Entertainment: Musicals & Theatres",id:13},{tag:"Entertainment: Television",id:14},{tag:"Entertainment: Video Games",id:15},{tag:"Entertainment: Board Games",id:16},{tag:"Science & Nature",id:17},{tag:"Science: Computers",id:18},{tag:"Science: Mathematics",id:19},{tag:"Mythology",id:20},{tag:"Sports",id:21},{tag:"Geography",id:22},{tag:"History",id:23},{tag:"Politics",id:24},{tag:"Art",id:25},{tag:"Celebrities",id:26},{tag:"Animals",id:27},{tag:"Vehicles",id:28},{tag:"Entertainment: Comics",id:29},{tag:"Science: Gadgets",id:30},{tag:"Entertainment: Japanese Anime & Manga",id:31},{tag:"Entertainment: Cartoon & Animations",id:32}],q=["easy","medium","hard"],F=[{tag:"Multiple Choice",id:"multiple"},{tag:"True / False",id:"boolean"}],P=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleCategory",value:function(e){(0,this.props.setCategory)(e)}},{key:"handleDifficulty",value:function(e){(0,this.props.setDifficulty)(e)}},{key:"handleType",value:function(e){(0,this.props.setType)(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("title",{"data-testid":"settings-title"},"Configura\xe7\xf5es"),r.a.createElement("h1",{className:"display-3 text-center"},"Configura\xe7\xf5es"),r.a.createElement("div",{className:"d-flex justify-content-center flex-column"},r.a.createElement("p",{className:"lead mb-3"},"Selecionar Categorias de quest\xf5es: "),r.a.createElement("select",{className:"mb-3",onChange:function(t){return e.handleCategory(t.target.value)}},r.a.createElement("option",{value:""}),L.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.tag)}))),r.a.createElement("p",{className:"lead mb-3"},"Selecionar dificuldade: "),r.a.createElement("select",{className:"mb-3",onChange:function(t){return e.handleDifficulty(t.target.value)}},r.a.createElement("option",{value:""}),q.map((function(e){return r.a.createElement("option",{key:e},e)}))),r.a.createElement("p",{className:"lead mb-3"},"Selecionar m\xfaltipla escolha ou verdadeiro/falso: "),r.a.createElement("select",{onChange:function(t){return e.handleType(t.target.value)}},r.a.createElement("option",{value:""}),F.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.tag)})))),r.a.createElement(s.b,{to:"/",className:"btn btn-primary btn-lg mt-3"},"Voltar "))}}]),t}(r.a.Component),U=Object(o.b)(null,(function(e){return{setCategory:function(t){return e({type:"CONFIG_CATEGORY",confCategory:t})},setDifficulty:function(t){return e({type:"CONFIG_DIFFICULTY",confDifficulty:t})},setType:function(t){return e({type:"CONFIG_TYPE",confType:t})}}}))(P),J=function(e){var t=e.totalAnswears;return r.a.createElement("div",null,t<3?r.a.createElement("h1",{className:"display-4","data-testid":"feedback-text"},"Podia ser melhor..."):r.a.createElement("h1",{className:"display-4","data-testid":"feedback-text"},"Mandou bem!"))},K=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"restartGame",value:function(){(0,this.props.clearlogin)()}},{key:"newGame",value:function(){(0,this.props.clearpoints)()}},{key:"tryAgain",value:function(){var e=this;return r.a.createElement(s.b,{to:"/gamepage"},r.a.createElement("button",{className:"btn btn-primary btn-lg m-2",type:"button",onClick:function(){return e.newGame()}},"Tentar novamente"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.totalAns,n=t.scorePoints;return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"jumbotron mt-3"},r.a.createElement(J,{totalAnswears:a}),r.a.createElement("div",{"p-3":!0},r.a.createElement("span",{className:"lead"},"Voc\xea acertou "),r.a.createElement("span",{className:"lead","data-testid":"feedback-total-question"},a),r.a.createElement("span",{className:"lead"}," quest\xf5es")),r.a.createElement("div",{"p-3":!0,"mb-3":!0},r.a.createElement("span",{className:"lead"},"Fez um total de "),r.a.createElement("span",{className:"lead","data-testid":"feedback-total-score"},n),r.a.createElement("span",{className:"lead"}," pontos"),r.a.createElement("hr",null)),this.tryAgain(),r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{className:"btn btn-primary btn-lg m-2",type:"button",onClick:function(){return e.restartGame()},"data-testid":"btn-play-again"},"Jogar novamente")),r.a.createElement(s.b,{to:"/rankingscreen"},r.a.createElement("button",{className:"btn btn-info btn-lg m-2",type:"button",onClick:function(){return e.restartGame()},"data-testid":"btn-ranking"},"Ver Ranking")))))}}]),t}(r.a.Component),z=Object(o.b)((function(e){return{totalAns:e.scoreReducer.answers,scorePoints:e.scoreReducer.points}}),(function(e){return{clearlogin:function(){return e({type:"CLEAR_LOGIN_INFO"})},clearpoints:function(){return e({type:"CLEAR_LOGIN_POINTS"})}}}))(K),M=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.ranking;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3 text-center","data-testid":"ranking-title"},"RANKING"),r.a.createElement("ul",{className:"list-group mb-4"},e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement("li",{className:"list-group-item"},r.a.createElement("img",{className:"rounded",src:"https://www.gravatar.com/avatar/".concat(e.avatar),alt:"avatar"}),r.a.createElement("span",{className:"lead px-3","data-testid":"player-name-".concat(t)},e.name),r.a.createElement("span",{className:"badge badge-primary px-3","data-testid":"player-score-".concat(t)},e.score))}))),r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{className:"btn btn-primary",type:"button","data-testid":"btn-go-home"},"In\xedcio")))}}]),t}(n.Component),Q=Object(o.b)((function(e){return{ranking:e.rankingReducer}}))(M);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(16),V=a(42),W={token:"",questions:[]},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GENERATE_TOKEN":return localStorage.setItem("token",t.payload.data.token),Object(S.a)({},e,{token:t.payload.data.token});case"STORE_QUESTIONS":return console.log(e),Object(S.a)({},e,{questions:Object(I.a)(t.payload.data.results)});default:return e}},H=[],Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER_DATA":return[].concat(Object(I.a)(e),[{name:t.name,avatar:t.avatar}]);case"CLEAR_LOGIN_INFO":return[];default:return e}},X={points:0,answers:0},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_LOGIN_INFO":case"CLEAR_LOGIN_POINTS":return Object(S.a)({},e,{points:0,answers:0});case"UPDATE_SCORE":return Object(S.a)({},e,{points:e.points+t.points});case"COUNT_RIGHT_ANSWEAR":return Object(S.a)({},e,{answers:e.answers+1});default:return e}},ee={count:30},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TICK_TOCK":return Object(S.a)({},e,{count:e.count-1});case"CLOCK_FREEZED":return Object(S.a)({},e,{freeze:!0});case"RESTORE_CLOCK":return Object(S.a)({},e,{count:30,freeze:!1});default:return e}},ae=[],ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_RANKING":return[].concat(Object(I.a)(e),[{name:t.name,avatar:t.avatar,score:t.score}]);default:return e}},re={confCategory:"",confDifficulty:"",confType:""},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIG_CATEGORY":return Object(S.a)({},e,{confCategory:t.confCategory});case"CONFIG_DIFFICULTY":return Object(S.a)({},e,{confDifficulty:t.confDifficulty});case"CONFIG_TYPE":return Object(S.a)({},e,{confType:t.confType});default:return e}},ie=Object(B.c)({apiReducer:Y,loginReducer:Z,scoreReducer:$,counterReducer:te,rankingReducer:ne,configReducer:ce}),oe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.d,se=Object(B.e)(ie,oe(Object(B.a)(V.a)));i.a.render(r.a.createElement(o.a,{store:se},r.a.createElement((function(){return r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/gamepage",component:G}),r.a.createElement(l.a,{exact:!0,path:"/rankingscreen",component:Q}),r.a.createElement(l.a,{exact:!0,path:"/feedback",component:z}),r.a.createElement(l.a,{exact:!0,path:"/Configuration",component:U}),r.a.createElement(l.a,{exact:!0,path:"/",component:T}))))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.f6384ceb.chunk.js.map